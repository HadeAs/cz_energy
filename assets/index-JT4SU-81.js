import{S as G,r as i,T as H,v as I,o as s,A as b,B as l,V as N,ae as S,x as C,X as q,Y as E,Z as h,c as g,J as e,af as T,a1 as B,a2 as O,a0 as z,a6 as Q,a7 as D,a8 as P,z as W,a9 as ee,aa as ae,ab as le,ac as te,ad as oe}from"./index-C-tyC_6H.js";import{v as re}from"./loading-asc02wkW.js";import{_ as ne}from"./ProTable-g_K91LbJ.js";import{P as ue}from"./ProDrawer-80_OB0OG.js";import{E as se,a as ie}from"./form-item-2Qq2kISt.js";import{_ as de}from"./ProPopConfirm-zKBuYRGE.js";import{M as me}from"./MainContentContainer-utiYTNDP.js";import"./checkbox-t98SXIDk.js";import"./overlay-tk1qTxpW.js";const ce={__name:"detail",props:{initData:{type:Object}},setup(U,{expose:w}){const f={userRole:"",userName:"",password:"",status:"",bindProject:[],remark:""},V=[{label:"项目001",value:"项目001"},{label:"项目002",value:"项目002"},{label:"项目003",value:"项目003"},{label:"项目004",value:"项目004"},{label:"项目005",value:"项目005"},{label:"项目006",value:"项目006"},{label:"项目007",value:"项目007"},{label:"项目008",value:"项目008"}],u={userRole:{required:!0,message:"请选择用户角色",trigger:"change"},userName:{required:!0,message:"请输入用户名",trigger:"blur"},password:{required:!0,message:"请输入密码",trigger:"blur"},status:{required:!0,message:"请选择锁定状态",trigger:"change"},bindProject:{required:!0,message:"请选择关联项目",trigger:"change"},remark:[{required:!0,message:"请输入备注信息",trigger:"blur"},{min:5,message:"请输入至少5个字符",trigger:"blur"}]},_=U;w({validate:()=>p.value.validate().then(()=>o.detailForm).catch(()=>!1)});const p=i(),o=H({detailForm:f});return I(()=>{if(_.initData){const v={...f,..._.initData};o.detailForm=v}}),(v,n)=>{const x=B,R=O,c=se,k=z,j=ie;return s(),b(j,{ref_key:"formRef",ref:p,rules:u,"label-position":"left",model:o.detailForm,"label-width":"180px",class:"custom-form"},{default:l(()=>[e(c,{label:"用户角色",required:"",prop:"userRole"},{default:l(()=>[e(R,{modelValue:o.detailForm.userRole,"onUpdate:modelValue":n[0]||(n[0]=t=>o.detailForm.userRole=t),placeholder:"请选择"},{default:l(()=>[(s(!0),g(N,null,h(C(S),t=>(s(),b(x,E(q(t)),null,16))),256))]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"用户名",required:"",prop:"userName"},{default:l(()=>[e(k,{placeholder:"请输入",modelValue:o.detailForm.userName,"onUpdate:modelValue":n[1]||(n[1]=t=>o.detailForm.userName=t)},null,8,["modelValue"])]),_:1}),e(c,{label:"密码",required:"",prop:"password"},{default:l(()=>[e(k,{placeholder:"请输入",modelValue:o.detailForm.password,"onUpdate:modelValue":n[2]||(n[2]=t=>o.detailForm.password=t),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),e(c,{label:"锁定状态",required:"",prop:"status"},{default:l(()=>[e(R,{modelValue:o.detailForm.status,"onUpdate:modelValue":n[3]||(n[3]=t=>o.detailForm.status=t),placeholder:"请选择"},{default:l(()=>[(s(!0),g(N,null,h(C(T),t=>(s(),b(x,E(q(t)),null,16))),256))]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"关联项目",required:"",prop:"bindProject"},{default:l(()=>[e(R,{multiple:"",modelValue:o.detailForm.bindProject,"onUpdate:modelValue":n[4]||(n[4]=t=>o.detailForm.bindProject=t),placeholder:"请选择"},{default:l(()=>[(s(),g(N,null,h(V,t=>e(x,E(q(t)),null,16)),64))]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"备注信息",required:"",prop:"remark"},{default:l(()=>[e(k,{modelValue:o.detailForm.remark,"onUpdate:modelValue":n[5]||(n[5]=t=>o.detailForm.remark=t),type:"textarea",placeholder:"请输入至少5个字符"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])}}},pe=G(ce,[["__scopeId","data-v-9e471050"]]),fe=["onClick"],_e={class:"table-operator-btn"},Ne={__name:"index",setup(U){const w=i(""),f=i(""),V=i(!1),u=i([]),_=i(""),p=i(),o=i(),v=i(""),n=i(null),x=i({total:4,currentPage:1,pageSize:10,pageSizes:[10,15,20,50]}),R=[{label:"项目001",value:"项目001"},{label:"项目002",value:"项目002"},{label:"项目003",value:"项目003"},{label:"项目004",value:"项目004"},{label:"项目005",value:"项目005"},{label:"项目006",value:"项目006"},{label:"项目007",value:"项目007"},{label:"项目008",value:"项目008"}],c=()=>{_.value="add",v.value="新增账号信息",n.value=null,p.value.open()},k=a=>{_.value="edit",v.value="编辑账号信息",n.value=a,p.value.open()},j=async()=>{const a=await o.value.validate();if(a){if(_.value==="add")u.value.push(a);else{const r=u.value.findIndex(d=>d.id===a.id);u.value.splice(r,1,a)}u.value=[...u.value],p.value.close()}},t=()=>{console.log("项目名：",f.value,"用户：",w.value)},M=a=>{const r=u.value.findIndex(d=>d.id===a.id);u.value.splice(r,1),u.value=[...u.value]},L=(a,r)=>{console.log(a,r)},$=[{prop:"userName",label:"用户名",render:a=>e("div",{className:"text-overflow",title:a.row.userName},[e("b",null,[a.row.userName])])},{prop:"userRole",label:"用户角色",render:a=>{const r=S.find(d=>d.value===a.row.userRole);return r?e("div",{className:"text-overflow",title:r.label},[e("span",null,[r.label])]):""}},{prop:"bindProject",label:"绑定项目",render:a=>e("div",{className:"text-overflow",title:a.row.bindProject},[e("span",null,[a.row.bindProject])])},{prop:"remark",label:"备注",width:280,render:a=>e("div",{className:"text-overflow",title:a.row.remark},[e("span",null,[a.row.remark])])},{prop:"status",label:"账号状态",render:a=>{const r=a.row.status==="1",d=T.find(F=>F.value===a.row.status);return d?e(N,null,[e("span",{style:{color:r?"#00B050":"#FA5555",fontSize:"8px",marginRight:"5px"}},[P("●")," "]),e("span",null,[d.label])]):""}}];return I(async()=>{V.value=!0;const a=await new Promise(r=>{setTimeout(()=>{V.value=!1,r([{id:"1",userName:"admin",remark:"这是备注内容这是备注内容",status:"1",userRole:"1",bindProject:["项目001"]},{id:"2",userName:"admin",remark:"这是备注内容",status:"1",userRole:"1",bindProject:["项目001"]},{id:"3",userName:"admin",remark:"这是备注内容这是备注内容",status:"1",userRole:"2",bindProject:["项目002"]},{id:"4",userName:"admin",remark:"这是备注内容",status:"0",userRole:"2",bindProject:["项目002"]}])},1e3)});u.value=a}),(a,r)=>{const d=ee,F=ae,A=B,K=O,J=z,X=le,y=Q("auth"),Y=re;return s(),b(me,null,{default:l(()=>[D((s(),b(ne,{column:$,pageInfo:x.value,datasource:u.value,onPageChange:L},{toolbar:l(()=>[e(X,{align:"middle",gutter:5},{default:l(()=>[e(F,{span:2},{default:l(()=>[D((s(),b(d,{type:"primary",onClick:c},{default:l(()=>[P("新增")]),_:1})),[[y,"account_add"]])]),_:1}),e(F,{offset:14,span:4},{default:l(()=>[e(K,{clearable:"",modelValue:f.value,"onUpdate:modelValue":r[0]||(r[0]=m=>f.value=m),placeholder:"选择项目",onChange:t},{default:l(()=>[(s(),g(N,null,h(R,m=>e(A,{key:m.value,label:m.label,value:m.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(F,{span:4},{default:l(()=>[e(J,{clearable:"",modelValue:w.value,"onUpdate:modelValue":r[1]||(r[1]=m=>w.value=m),placeholder:"用户名/用户角色","suffix-icon":C(te),onKeyup:W(t,["enter"])},null,8,["modelValue","suffix-icon"])]),_:1})]),_:1})]),operation:l(m=>[D((s(),g("a",{class:"table-operator-btn",onClick:Z=>k(m.row)},[P("编辑")],8,fe)),[[y,"account_edit"]]),e(de,{title:"你确定要删除该账号嘛?",icon:C(oe),iconColor:"red",onConfirm:Z=>M(m.row)},{default:l(()=>[D((s(),g("a",_e,[P("删除")])),[[y,"account_delete"]])]),_:2},1032,["icon","onConfirm"])]),_:1},8,["pageInfo","datasource"])),[[Y,V.value]]),e(ue,{title:v.value,ref_key:"detailDrawerRef",ref:p,onConfirm:j},{default:l(()=>[e(pe,{ref_key:"accountDetailRef",ref:o,initData:n.value},null,8,["initData"])]),_:1},8,["title"])]),_:1})}}};export{Ne as default};
