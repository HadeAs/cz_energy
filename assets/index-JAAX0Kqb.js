import{M as ce}from"./MainTabContainer-8Iem6-ZM.js";import{r as k,T as F,o as r,A as y,B as t,x as L,aw as z,V as A,Z as N,c as M,J as e,a1 as G,a2 as K,w as ue,a0 as Z,a6 as H,a8 as I,a7 as E,y as ie,G as de,aq as q,a9 as Q,aa as X,ab as Y,ax as ee,S as te}from"./index-bE8Zn5GN.js";import{v as ae}from"./loading-T_xWoKmE.js";import{M as oe}from"./MainContentContainer-Kp_pWo3U.js";import{_ as ne}from"./ProTable-FmZOW7gK.js";import{E as P,a as T}from"./form-item-_I9Q075a.js";import{_ as le}from"./ProSearchContainer-OHb1Rmqk.js";import{P as W}from"./ProDrawer-hLtuVeAF.js";import{C as J}from"./formConfig-7IyXZZgD.js";/* empty css                */import"./overlay-JP1cNXmo.js";import{E as pe}from"./index-sn9CNGwt.js";import{E as _e}from"./index-h93KvNtT.js";import"./tab-pane-9IUnvkMs.js";import"./checkbox-F1kls9Rl.js";import"./date-picker-Y_LGB8Ft.js";const fe={__name:"addDetail",emits:["submit"],setup(b,{expose:g,emit:D}){const v={type:""},s=D,a=k(),h=k(),c=F({form:{...v},opts:[{id:"1",text:"设备1"},{id:"2",text:"设备2"},{id:"3",text:"设备3"}]}),d=async()=>{await h.value.validate(x=>{x&&(a.value.close(),s("submit",c.form))})};return g({open:()=>{a.value.open()}}),(x,p)=>{const o=G,m=K,i=P,u=T;return r(),y(W,{title:"新增",ref_key:"handleDrawerRef",ref:a,onConfirm:d},{default:t(()=>[e(u,z({ref_key:"formRef",ref:h},L(J),{model:c.form}),{default:t(()=>[e(i,{label:"报警设备名称",required:"",prop:"type"},{default:t(()=>[e(m,{modelValue:c.form.type,"onUpdate:modelValue":p[0]||(p[0]=l=>c.form.type=l)},{default:t(()=>[(r(!0),M(A,null,N(c.opts,l=>(r(),y(o,{key:l.id,label:l.text,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},16,["model"])]),_:1},512)}}},be={__name:"handle",props:{data:{type:Object,default:{}}},emits:["submit"],setup(b,{expose:g,emit:D}){const v={name:"",admin:"",remark:""},s=D,a=b,h=k(),c=k(),d=F({form:{...v,...a.data}}),S=async()=>{await c.value.validate(p=>{p&&(h.value.close(),s("submit",d.form))})};return ue(()=>a.data,p=>{d.form=p}),g({open:()=>{h.value.open()}}),(p,o)=>{const m=Z,i=P,u=T;return r(),y(W,{title:"立即处理",ref_key:"handleDrawerRef",ref:h,onConfirm:S},{default:t(()=>[e(u,z({ref_key:"formRef",ref:c},L(J),{model:d.form}),{default:t(()=>[e(i,{label:"报警设备名称",required:"",prop:"name"},{default:t(()=>[e(m,{placeholder:"请输入报警设备名称",modelValue:d.form.name,"onUpdate:modelValue":o[0]||(o[0]=l=>d.form.name=l)},null,8,["modelValue"])]),_:1}),e(i,{label:"处理人",required:"",prop:"admin"},{default:t(()=>[e(m,{placeholder:"请输入处理人",modelValue:d.form.admin,"onUpdate:modelValue":o[1]||(o[1]=l=>d.form.admin=l)},null,8,["modelValue"])]),_:1}),e(i,{label:"处理详情",required:"",prop:"remark"},{default:t(()=>[e(m,{type:"textarea",rows:3,placeholder:"请输入至少五个字符",modelValue:d.form.remark,"onUpdate:modelValue":o[2]||(o[2]=l=>d.form.remark=l)},null,8,["modelValue"])]),_:1})]),_:1},16,["model"])]),_:1},512)}}},ge=["onClick"];function he(b){return typeof b=="function"||Object.prototype.toString.call(b)==="[object Object]"&&!ee(b)}const ye={__name:"index",setup(b){const g=[{checkBox:"",name:"报警设备名称",project:"项目001",type:"冷水机组",admin:"admin",time1:"2020-04-23 10:10:10",time2:"2020-04-23 10:10:10",desc:"操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录",status:1,level:1},{checkBox:"",name:"报警设备名称",project:"项目001",type:"冷水机组",admin:"admin",time1:"2020-04-23 10:10:10",time2:"2020-04-23 10:10:10",desc:"操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录",status:0,level:1},{checkBox:"",name:"报警设备名称",project:"项目001",type:"冷水机组",admin:"admin",time1:"2020-04-23 10:10:10",time2:"2020-04-23 10:10:10",desc:"操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录",status:1,level:1},{checkBox:"",name:"报警设备名称",project:"项目001",type:"冷水机组",admin:"admin",time1:"2020-04-23 10:10:10",time2:"2020-04-23 10:10:10",desc:"操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录",status:0,level:2}],D=[{label:"报警时间范围",prop:"timeRange",type:"datetimerange",value:""},{label:"关键词搜索",prop:"keyWord",type:"input",value:""}],v=k(),s=k(),a=F({searchFormData:{level:"all",type:"all"},levels:[{id:"all",text:"报警等级"}],names:[{id:"all",text:"全部项目名称"}],dataSource:[],loading:!0,selectRows:[],currentData:{}}),h=F({total:100,currentPage:1,pageSize:10,pageSizes:[10,15,20,50]}),c=[{prop:"name",label:"报警设备名称",width:110,fixed:!0,render:n=>e("div",{className:"text-overflow",title:n.row.name},[e("b",null,[n.row.name])])},{prop:"project",label:"所属项目",width:100},{prop:"time1",label:"报警时间",width:180},{prop:"level",label:"处理等级",width:100,render:n=>{const _=n.row.level;let C="success",w="三级";return _===1?(C="danger",w="一级"):_===2&&(C="warning",w="二级"),e(q,{type:C},he(w)?w:{default:()=>[w]})}},{prop:"admin",label:"处理人",width:80},{prop:"time2",label:"处理时间"},{prop:"status",label:"处理过程",render:n=>{const _=n.row.status;return e(q,{type:_===1?"danger":"success"},{default:()=>[_===1?"未处理":"已处理"]})}},{prop:"desc",label:"操作记录",width:220}];(async()=>{const n=await new Promise(_=>{setTimeout(()=>{a.loading=!1;const C=new Array(10).fill("").map((w,V)=>{const R=V%4;return{...g[R],project:g[R].project+"00"+V,id:V}});_(C)},600)});a.dataSource=n})();const S=()=>{pe.confirm("确认导出选中的内容？","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{_e({type:"success",message:"导出成功"})}).catch(()=>{})},x=n=>{console.log(n)},p=(n,_)=>{console.log(n,_)},o=n=>{a.selectRows=n},m=()=>{v.value.open()},i=n=>{n.status===1&&(a.currentData=n,s.value.open())},u=n=>{},l=n=>{};return(n,_)=>{const C=le,w=Q,V=X,R=G,B=K,O=P,U=T,j=Y,re=ne,se=oe,$=H("auth"),me=ae;return r(),M("div",null,[e(C,{class:"search",buttonContent:"搜索","form-info":D,authKey:"alarm_actual_search",onButtonClick:x}),e(se,null,{default:t(()=>[E((r(),y(re,{multiple:"",column:c,pageInfo:h,datasource:a.dataSource,onPageChange:p,onSelectionChange:o},{toolbar:t(()=>[e(j,{align:"middle",gutter:5},{default:t(()=>[e(V,{span:6},{default:t(()=>[E((r(),y(w,{type:"primary",onClick:m},{default:t(()=>[I("新增")]),_:1})),[[$,"alarm_actual_add"]]),E((r(),y(w,{disabled:!a.selectRows.length,onClick:S},{default:t(()=>[I("批量导出")]),_:1},8,["disabled"])),[[$,"alarm_actual_batch_export"]])]),_:1}),e(V,{span:18},{default:t(()=>[e(U,{class:"search-form",inline:!0,model:a.searchFormData},{default:t(()=>[e(O,null,{default:t(()=>[e(B,{modelValue:a.searchFormData.level,"onUpdate:modelValue":_[0]||(_[0]=f=>a.searchFormData.level=f)},{default:t(()=>[(r(!0),M(A,null,N(a.levels,f=>(r(),y(R,{key:f.id,label:f.text,value:f.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(O,null,{default:t(()=>[e(B,{modelValue:a.searchFormData.type,"onUpdate:modelValue":_[1]||(_[1]=f=>a.searchFormData.type=f)},{default:t(()=>[(r(!0),M(A,null,N(a.names,f=>(r(),y(R,{key:f.id,label:f.text,value:f.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),operation:t(f=>[E((r(),M("a",{class:ie(["table-operator-btn",f.row.status===1?"":"disabled"]),onClick:Ve=>i(f.row)},[I(de(f.row.status===1?"立即处理":"已处理成功"),1)],10,ge)),[[$,"alarm_actual_deal"]])]),_:1},8,["pageInfo","datasource"])),[[me,a.loading]])]),_:1}),e(fe,{ref_key:"addRef",ref:v,onSubmit:u},null,512),e(be,{ref_key:"handleRef",ref:s,data:a.currentData,onSubmit:l},null,8,["data"])])}}},ve=te(ye,[["__scopeId","data-v-39077849"]]),we={__name:"addDetail",emits:["submit"],setup(b,{expose:g,emit:D}){const v={name:"",num:""},s=D,a=k(),h=k(),c=F({form:{...v}}),d=async()=>{await h.value.validate(x=>{x&&(a.value.close(),s("submit",c.form))})};return g({open:()=>{a.value.open()}}),(x,p)=>{const o=Z,m=P,i=T;return r(),y(W,{title:"新增",ref_key:"handleDrawerRef",ref:a,onConfirm:d},{default:t(()=>[e(i,z({ref_key:"formRef",ref:h},L(J),{model:c.form}),{default:t(()=>[e(m,{label:"监测点位名称",required:"",prop:"name"},{default:t(()=>[e(o,{placeholder:"请输入监测点位名称",modelValue:c.form.name,"onUpdate:modelValue":p[0]||(p[0]=u=>c.form.name=u)},null,8,["modelValue"])]),_:1}),e(m,{label:"阈值",required:"",prop:"num"},{default:t(()=>[e(o,{placeholder:"请输入阈值",modelValue:c.form.num,"onUpdate:modelValue":p[1]||(p[1]=u=>c.form.num=u)},null,8,["modelValue"])]),_:1})]),_:1},16,["model"])]),_:1},512)}}};function De(b){return typeof b=="function"||Object.prototype.toString.call(b)==="[object Object]"&&!ee(b)}const xe={__name:"index",setup(b){const g=[{name:"监测点位名称监测点位名称00145130",project:"项目001",time:"2020-04-23 10:10:10",currentData:"0",num:"00",desc:"操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录",status:1},{name:"监测点位名称监测点位名称00145130",project:"项目001",time:"2020-04-23 10:10:10",currentData:"0",num:"00",desc:"操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录",status:0},{name:"监测点位名称监测点位名称00145130",project:"项目001",time:"2020-04-23 10:10:10",currentData:"0",num:"00",desc:"操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录",status:1},{name:"监测点位名称监测点位名称00145130",project:"项目001",time:"2020-04-23 10:10:10",currentData:"0",num:"00",desc:"操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录操作记录",status:0}],D=[{label:"报警时间范围",prop:"timeRange",type:"datetimerange",value:""},{label:"关键词搜索",prop:"keyWord",type:"input",value:""}],v=k(),s=F({searchFormData:{type:"all"},names:[{id:"all",text:"全部项目名称"}],dataSource:[],loading:!0,currentData:{}}),a=F({total:100,currentPage:1,pageSize:10,pageSizes:[10,15,20,50]}),h=[{prop:"name",label:"监测点位名称",width:200,fixed:!0,render:o=>e("div",{className:"text-overflow",title:o.row.name},[e("b",null,[o.row.name])])},{prop:"project",label:"所属项目",width:100},{prop:"time",label:"监控时间",width:180},{prop:"num",label:"最大阈值",width:100},{prop:"num",label:"最小阈值",width:100},{prop:"status",label:"报警状态",render:o=>{const m=o.row.status;let i="",u="";return m===1?(i="success",u="正常"):(i="danger",u="异常"),e(q,{type:i},De(u)?u:{default:()=>[u]})}},{prop:"desc",label:"操作记录",width:220}];(async()=>{const o=await new Promise(m=>{setTimeout(()=>{s.loading=!1;const i=new Array(10).fill("").map((u,l)=>{const n=l%4;return{...g[n],project:g[n].project+"00"+l,id:l}});m(i)},600)});s.dataSource=o})();const d=o=>{console.log(o)},S=(o,m)=>{console.log(o,m)},x=()=>{v.value.open()},p=o=>{};return(o,m)=>{const i=le,u=Q,l=X,n=G,_=K,C=P,w=T,V=Y,R=ne,B=oe,O=H("auth"),U=ae;return r(),M("div",null,[e(i,{class:"search",buttonContent:"搜索","form-info":D,onButtonClick:d,authKey:"alarm_work_search"}),e(B,null,{default:t(()=>[E((r(),y(R,{column:h,pageInfo:a,datasource:s.dataSource,onPageChange:S},{toolbar:t(()=>[e(V,{align:"middle",gutter:5},{default:t(()=>[e(l,{span:6},{default:t(()=>[E((r(),y(u,{type:"primary",onClick:x},{default:t(()=>[I("数据补录")]),_:1})),[[O,"alarm_work_add"]])]),_:1}),e(l,{span:18},{default:t(()=>[e(w,{class:"search-form",inline:!0,model:s.searchFormData},{default:t(()=>[e(C,null,{default:t(()=>[e(_,{modelValue:s.searchFormData.type,"onUpdate:modelValue":m[0]||(m[0]=j=>s.searchFormData.type=j)},{default:t(()=>[(r(!0),M(A,null,N(s.names,j=>(r(),y(n,{key:j.id,label:j.text,value:j.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1},8,["pageInfo","datasource"])),[[U,s.loading]])]),_:1}),e(we,{ref_key:"addRef",ref:v,onSubmit:p},null,512)])}}},Ce=te(xe,[["__scopeId","data-v-92645e57"]]),ke="live",Le={__name:"index",setup(b){const g=[{label:"实时报警",name:"live",component:ve},{label:"运行报警",name:"run",component:Ce}];return(D,v)=>{const s=ce;return r(),y(s,{tabData:g,defaultTab:ke})}}};export{Le as default};
