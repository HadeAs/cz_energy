import{b as P,d as ae,e as F,U,f as le,k as te,bR as se,aX as N,r as p,bS as ne,bT as re,q as w,s as q,w as O,bU as ie,O as de,v as ue,bM as R,a$ as ce,_ as fe,j as me,aT as ve,E as pe,bo as ye,N as V,m as be,aP as Ce,aI as E,o as m,A as H,J as v,B as s,M as he,aw as _,y as f,a as D,G,c as g,F as h,K as B,aJ as we,a7 as ke,a_ as Se,by as ge,R as Be,S as Ee,a8 as M,a9 as De}from"./index-bE8Zn5GN.js";import{u as Ie,E as $e}from"./overlay-JP1cNXmo.js";const Te=P({center:Boolean,alignCenter:Boolean,closeIcon:{type:ae},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),Ke={close:()=>!0},Ae=P({...Te,appendToBody:Boolean,appendTo:{type:F(String),default:"body"},beforeClose:{type:F(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),Pe={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[U]:e=>le(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Le=(e,a)=>{var n;const o=te().emit,{nextZIndex:d}=se();let r="";const i=N(),b=N(),l=p(!1),u=p(!1),C=p(!1),I=p((n=e.zIndex)!=null?n:d());let k,S;const J=ne("namespace",re),Z=w(()=>{const t={},c=`--${J.value}-dialog`;return e.fullscreen||(e.top&&(t[`${c}-margin-top`]=e.top),e.width&&(t[`${c}-width`]=q(e.width))),t}),j=w(()=>e.alignCenter?{display:"flex"}:{});function K(){o("opened")}function X(){o("closed"),o(U,!1),e.destroyOnClose&&(C.value=!1)}function Q(){o("close")}function L(){S==null||S(),k==null||k(),e.openDelay&&e.openDelay>0?{stop:k}=R(()=>z(),e.openDelay):z()}function $(){k==null||k(),S==null||S(),e.closeDelay&&e.closeDelay>0?{stop:S}=R(()=>A(),e.closeDelay):A()}function T(){function t(c){c||(u.value=!0,l.value=!1)}e.beforeClose?e.beforeClose(t):$()}function W(){e.closeOnClickModal&&T()}function z(){ce&&(l.value=!0)}function A(){l.value=!1}function Y(){o("openAutoFocus")}function x(){o("closeAutoFocus")}function ee(t){var c;((c=t.detail)==null?void 0:c.focusReason)==="pointer"&&t.preventDefault()}e.lockScroll&&Ie(l);function oe(){e.closeOnPressEscape&&T()}return O(()=>e.modelValue,t=>{t?(u.value=!1,L(),C.value=!0,I.value=ie(e.zIndex)?d():I.value++,de(()=>{o("open"),a.value&&(a.value.scrollTop=0)})):l.value&&$()}),O(()=>e.fullscreen,t=>{a.value&&(t?(r=a.value.style.transform,a.value.style.transform=""):a.value.style.transform=r)}),ue(()=>{e.modelValue&&(l.value=!0,C.value=!0,L())}),{afterEnter:K,afterLeave:X,beforeLeave:Q,handleClose:T,onModalClick:W,close:$,doClose:A,onOpenAutoFocus:Y,onCloseAutoFocus:x,onCloseRequested:oe,onFocusoutPrevented:ee,titleId:i,bodyId:b,closed:u,style:Z,overlayDialogStyle:j,rendered:C,visible:l,zIndex:I}},ze=P({...Ae,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),Fe=Pe,Ne=me({name:"ElDrawer",components:{ElOverlay:$e,ElFocusTrap:ve,ElIcon:pe,Close:ye},inheritAttrs:!1,props:ze,emits:Fe,setup(e,{slots:a}){V({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},w(()=>!!a.title)),V({scope:"el-drawer",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/drawer.html#attributes",type:"Attribute"},w(()=>!!e.customClass));const n=p(),y=p(),o=be("drawer"),{t:d}=Ce(),r=w(()=>e.direction==="rtl"||e.direction==="ltr"),i=w(()=>q(e.size));return{...Le(e,n),drawerRef:n,focusStartRef:y,isHorizontal:r,drawerSize:i,ns:o,t:d}}}),Oe=["aria-label","aria-labelledby","aria-describedby"],Re=["id","aria-level"],Ve=["aria-label"],Me=["id"];function Ue(e,a,n,y,o,d){const r=E("close"),i=E("el-icon"),b=E("el-focus-trap"),l=E("el-overlay");return m(),H(ge,{to:"body",disabled:!e.appendToBody},[v(Se,{name:e.ns.b("fade"),onAfterEnter:e.afterEnter,onAfterLeave:e.afterLeave,onBeforeLeave:e.beforeLeave,persisted:""},{default:s(()=>[ke(v(l,{mask:e.modal,"overlay-class":e.modalClass,"z-index":e.zIndex,onClick:e.onModalClick},{default:s(()=>[v(b,{loop:"",trapped:e.visible,"focus-trap-el":e.drawerRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:s(()=>[D("div",_({ref:"drawerRef","aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:e.titleId,"aria-describedby":e.bodyId},e.$attrs,{class:[e.ns.b(),e.direction,e.visible&&"open",e.customClass],style:e.isHorizontal?"width: "+e.drawerSize:"height: "+e.drawerSize,role:"dialog",onClick:a[1]||(a[1]=he(()=>{},["stop"]))}),[D("span",{ref:"focusStartRef",class:f(e.ns.e("sr-focus")),tabindex:"-1"},null,2),e.withHeader?(m(),g("header",{key:0,class:f(e.ns.e("header"))},[e.$slots.title?B(e.$slots,"title",{key:1},()=>[h(" DEPRECATED SLOT ")]):B(e.$slots,"header",{key:0,close:e.handleClose,titleId:e.titleId,titleClass:e.ns.e("title")},()=>[e.$slots.title?h("v-if",!0):(m(),g("span",{key:0,id:e.titleId,role:"heading","aria-level":e.headerAriaLevel,class:f(e.ns.e("title"))},G(e.title),11,Re))]),e.showClose?(m(),g("button",{key:2,"aria-label":e.t("el.drawer.close"),class:f(e.ns.e("close-btn")),type:"button",onClick:a[0]||(a[0]=(...u)=>e.handleClose&&e.handleClose(...u))},[v(i,{class:f(e.ns.e("close"))},{default:s(()=>[v(r)]),_:1},8,["class"])],10,Ve)):h("v-if",!0)],2)):h("v-if",!0),e.rendered?(m(),g("div",{key:1,id:e.bodyId,class:f(e.ns.e("body"))},[B(e.$slots,"default")],10,Me)):h("v-if",!0),e.$slots.footer?(m(),g("div",{key:2,class:f(e.ns.e("footer"))},[B(e.$slots,"footer")],2)):h("v-if",!0)],16,Oe)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[we,e.visible]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var qe=fe(Ne,[["render",Ue],["__file","drawer.vue"]]);const He=Be(qe),_e={class:"drawer-title"},Ge={style:{flex:"auto"}},Je={__name:"ProDrawer",props:["title"],emits:["confirm","cancel"],setup(e,{expose:a,emit:n}){a({open:()=>{o.value=!0},close:()=>{o.value=!1}});const y=n,o=p(!1),d=()=>{y("cancel"),o.value=!1},r=async()=>{y("confirm")};return(i,b)=>{const l=De,u=He;return m(),H(u,_({modelValue:o.value,"onUpdate:modelValue":b[0]||(b[0]=C=>o.value=C),"destroy-on-close":""},i.$attrs),{header:s(()=>[D("div",_e,G(e.title),1)]),default:s(()=>[B(i.$slots,"default",{},void 0,!0)]),footer:s(()=>[D("div",Ge,[v(l,{onClick:d},{default:s(()=>[M("取消")]),_:1}),v(l,{type:"primary",onClick:r},{default:s(()=>[M("确定")]),_:1})])]),_:3},16,["modelValue"])}}},Xe=Ee(Je,[["__scopeId","data-v-5c97f58b"]]);export{Xe as P,Ke as a,Ae as b,Pe as c,Te as d,Le as u};
