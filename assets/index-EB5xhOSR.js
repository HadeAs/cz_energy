import{v as R,ba as ce,aY as de,s as W,b as Q,j as _,m as me,q as f,h as Y,o as g,c as F,K as ee,J as X,B as $,x as a,y as v,G as se,a as U,aJ as te,a7 as ne,a_ as oe,_ as ae,R as pe,d as fe,e as q,bh as ge,a$ as le,bL as ve,aV as ye,r as H,aW as j,w as he,aN as be,bi as Ce,A as L,L as Te,F as S,E as G,D as Ee,V as we,M as Me,aU as Le,bM as Ne,aO as Be,bN as J,g as K,ax as ie,aK as V,b0 as Z,b2 as xe,bO as Se}from"./index-C-tyC_6H.js";const Ze=(s,t,e)=>{let n={offsetX:0,offsetY:0};const o=d=>{const p=d.clientX,y=d.clientY,{offsetX:m,offsetY:h}=n,b=s.value.getBoundingClientRect(),N=b.left,E=b.top,D=b.width,B=b.height,k=document.documentElement.clientWidth,z=document.documentElement.clientHeight,w=-N+m,x=-E+h,C=k-N-D+m,I=z-E-B+h,l=O=>{const P=Math.min(Math.max(m+O.clientX-p,w),C),A=Math.min(Math.max(h+O.clientY-y,x),I);n={offsetX:P,offsetY:A},s.value&&(s.value.style.transform=`translate(${W(P)}, ${W(A)})`)},M=()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",l),document.addEventListener("mouseup",M)},i=()=>{t.value&&s.value&&t.value.addEventListener("mousedown",o)},r=()=>{t.value&&s.value&&t.value.removeEventListener("mousedown",o)};R(()=>{ce(()=>{e.value?i():r()})}),de(()=>{r()})},$e=Q({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),_e=["textContent"],De=_({name:"ElBadge"}),ke=_({...De,props:$e,setup(s,{expose:t}){const e=s,n=me("badge"),o=f(()=>e.isDot?"":Y(e.value)&&Y(e.max)?e.max<e.value?`${e.max}+`:`${e.value}`:`${e.value}`);return t({content:o}),(i,r)=>(g(),F("div",{class:v(a(n).b())},[ee(i.$slots,"default"),X(oe,{name:`${a(n).namespace.value}-zoom-in-center`,persisted:""},{default:$(()=>[ne(U("sup",{class:v([a(n).e("content"),a(n).em("content",i.type),a(n).is("fixed",!!i.$slots.default),a(n).is("dot",i.isDot)]),textContent:se(a(o))},null,10,_e),[[te,!i.hidden&&(a(o)||i.isDot)]])]),_:1},8,["name"])],2))}});var ze=ae(ke,[["__file","badge.vue"]]);const Ie=pe(ze),re=["success","info","warning","error"],u=ge({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:le?document.body:void 0}),Oe=Q({customClass:{type:String,default:u.customClass},center:{type:Boolean,default:u.center},dangerouslyUseHTMLString:{type:Boolean,default:u.dangerouslyUseHTMLString},duration:{type:Number,default:u.duration},icon:{type:fe,default:u.icon},id:{type:String,default:u.id},message:{type:q([String,Object,Function]),default:u.message},onClose:{type:q(Function),required:!1},showClose:{type:Boolean,default:u.showClose},type:{type:String,values:re,default:u.type},offset:{type:Number,default:u.offset},zIndex:{type:Number,default:u.zIndex},grouping:{type:Boolean,default:u.grouping},repeatNum:{type:Number,default:u.repeatNum}}),He={destroy:()=>!0},c=ve([]),Ye=s=>{const t=c.findIndex(o=>o.id===s),e=c[t];let n;return t>0&&(n=c[t-1]),{current:e,prev:n}},Fe=s=>{const{prev:t}=Ye(s);return t?t.vm.exposed.bottom.value:0},Ue=(s,t)=>c.findIndex(n=>n.id===s)>0?20:t,Ve=["id"],Xe=["innerHTML"],Pe=_({name:"ElMessage"}),Ae=_({...Pe,props:Oe,emits:He,setup(s,{expose:t}){const e=s,{Close:n}=Le,{ns:o,zIndex:i}=ye("message"),{currentZIndex:r,nextZIndex:d}=i,p=H(),y=H(!1),m=H(0);let h;const b=f(()=>e.type?e.type==="error"?"danger":e.type:"info"),N=f(()=>{const l=e.type;return{[o.bm("icon",l)]:l&&j[l]}}),E=f(()=>e.icon||j[e.type]||""),D=f(()=>Fe(e.id)),B=f(()=>Ue(e.id,e.offset)+D.value),k=f(()=>m.value+B.value),z=f(()=>({top:`${B.value}px`,zIndex:r.value}));function w(){e.duration!==0&&({stop:h}=Ne(()=>{C()},e.duration))}function x(){h==null||h()}function C(){y.value=!1}function I({code:l}){l===Be.esc&&C()}return R(()=>{w(),d(),y.value=!0}),he(()=>e.repeatNum,()=>{x(),w()}),be(document,"keydown",I),Ce(p,()=>{m.value=p.value.getBoundingClientRect().height}),t({visible:y,bottom:k,close:C}),(l,M)=>(g(),L(oe,{name:a(o).b("fade"),onBeforeLeave:l.onClose,onAfterLeave:M[0]||(M[0]=O=>l.$emit("destroy")),persisted:""},{default:$(()=>[ne(U("div",{id:l.id,ref_key:"messageRef",ref:p,class:v([a(o).b(),{[a(o).m(l.type)]:l.type&&!l.icon},a(o).is("center",l.center),a(o).is("closable",l.showClose),l.customClass]),style:Te(a(z)),role:"alert",onMouseenter:x,onMouseleave:w},[l.repeatNum>1?(g(),L(a(Ie),{key:0,value:l.repeatNum,type:a(b),class:v(a(o).e("badge"))},null,8,["value","type","class"])):S("v-if",!0),a(E)?(g(),L(a(G),{key:1,class:v([a(o).e("icon"),a(N)])},{default:$(()=>[(g(),L(Ee(a(E))))]),_:1},8,["class"])):S("v-if",!0),ee(l.$slots,"default",{},()=>[l.dangerouslyUseHTMLString?(g(),F(we,{key:1},[S(" Caution here, message could've been compromised, never use user's input as message "),U("p",{class:v(a(o).e("content")),innerHTML:l.message},null,10,Xe)],2112)):(g(),F("p",{key:0,class:v(a(o).e("content"))},se(l.message),3))]),l.showClose?(g(),L(a(G),{key:2,class:v(a(o).e("closeBtn")),onClick:Me(C,["stop"])},{default:$(()=>[X(a(n))]),_:1},8,["class","onClick"])):S("v-if",!0)],46,Ve),[[te,y.value]])]),_:3},8,["name","onBeforeLeave"]))}});var We=ae(Ae,[["__file","message.vue"]]);let qe=1;const ue=s=>{const t=!s||K(s)||ie(s)||V(s)?{message:s}:s,e={...u,...t};if(!e.appendTo)e.appendTo=document.body;else if(K(e.appendTo)){let n=document.querySelector(e.appendTo);xe(n)||(n=document.body),e.appendTo=n}return e},je=s=>{const t=c.indexOf(s);if(t===-1)return;c.splice(t,1);const{handler:e}=s;e.close()},Ge=({appendTo:s,...t},e)=>{const n=`message_${qe++}`,o=t.onClose,i=document.createElement("div"),r={...t,id:n,onClose:()=>{o==null||o(),je(m)},onDestroy:()=>{Z(null,i)}},d=X(We,r,V(r.message)||ie(r.message)?{default:V(r.message)?r.message:()=>r.message}:null);d.appContext=e||T._context,Z(d,i),s.appendChild(i.firstElementChild);const p=d.component,m={id:n,vnode:d,vm:p,handler:{close:()=>{p.exposed.visible.value=!1}},props:d.component.props};return m},T=(s={},t)=>{if(!le)return{close:()=>{}};if(Y(J.max)&&c.length>=J.max)return{close:()=>{}};const e=ue(s);if(e.grouping&&c.length){const o=c.find(({vnode:i})=>{var r;return((r=i.props)==null?void 0:r.message)===e.message});if(o)return o.props.repeatNum+=1,o.props.type=e.type,o.handler}const n=Ge(e,t);return c.push(n),n.handler};re.forEach(s=>{T[s]=(t={},e)=>{const n=ue(t);return T({...n,type:s},e)}});function Je(s){for(const t of c)(!s||s===t.props.type)&&t.handler.close()}T.closeAll=Je;T._context=null;const Re=Se(T,"$message");export{Re as E,Ze as u};
