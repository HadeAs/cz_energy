import{S as $,r as s,T as z,v as h,o as f,A as V,B as l,J as e,a0 as C,a6 as M,a7 as y,a8 as D,x as F,z as K,c as N,a9 as j,aa as A,ab as J,ac as L,ad as O}from"./index-C-tyC_6H.js";import{v as G}from"./loading-asc02wkW.js";import{_ as H}from"./ProTable-g_K91LbJ.js";import{P as Q}from"./ProDrawer-80_OB0OG.js";import{E as W,a as X}from"./form-item-2Qq2kISt.js";import{_ as Y}from"./ProPopConfirm-zKBuYRGE.js";import{M as Z}from"./MainContentContainer-utiYTNDP.js";import"./checkbox-t98SXIDk.js";import"./overlay-tk1qTxpW.js";const ee={__name:"detail",props:{initData:{type:Object}},setup(k,{expose:g}){const c={gatewayName:"",gatewayId:"",gatewayVersion:"",interface:"",remark:""},o=k,_={gatewayId:{required:!0,message:"请输入网关ID",trigger:"blur"},gatewayName:{required:!0,message:"请输入网关名称",trigger:"blur"},gatewayVersion:{required:!0,message:"请输入网关版本",trigger:"blur"},interface:{required:!0,message:"请输入通讯接口",trigger:"blur"},remark:[{required:!0,message:"请输入备注信息",trigger:"blur"},{min:5,message:"请输入至少5个字符",trigger:"blur"}]};g({validate:()=>d.value.validate().then(()=>t.detailForm).catch(()=>!1)});const d=s(),t=z({detailForm:c});return h(()=>{if(o.initData){const p={...c,...o.initData};t.detailForm=p}}),(p,r)=>{const u=C,m=W,b=X;return f(),V(b,{ref_key:"formRef",ref:d,rules:_,"label-position":"left",model:t.detailForm,"label-width":"180px",class:"custom-form"},{default:l(()=>[e(m,{label:"网关ID",required:"",prop:"gatewayId"},{default:l(()=>[e(u,{placeholder:"请输入",modelValue:t.detailForm.gatewayId,"onUpdate:modelValue":r[0]||(r[0]=n=>t.detailForm.gatewayId=n)},null,8,["modelValue"])]),_:1}),e(m,{label:"网关名称",required:"",prop:"gatewayName"},{default:l(()=>[e(u,{placeholder:"请输入",modelValue:t.detailForm.gatewayName,"onUpdate:modelValue":r[1]||(r[1]=n=>t.detailForm.gatewayName=n)},null,8,["modelValue"])]),_:1}),e(m,{label:"网关版本",required:"",prop:"gatewayVersion"},{default:l(()=>[e(u,{placeholder:"请输入",modelValue:t.detailForm.gatewayVersion,"onUpdate:modelValue":r[2]||(r[2]=n=>t.detailForm.gatewayVersion=n)},null,8,["modelValue"])]),_:1}),e(m,{label:"通讯接口",required:"",prop:"interface"},{default:l(()=>[e(u,{placeholder:"请输入",modelValue:t.detailForm.interface,"onUpdate:modelValue":r[3]||(r[3]=n=>t.detailForm.interface=n)},null,8,["modelValue"])]),_:1}),e(m,{label:"备注",required:"",prop:"remark"},{default:l(()=>[e(u,{modelValue:t.detailForm.remark,"onUpdate:modelValue":r[4]||(r[4]=n=>t.detailForm.remark=n),type:"textarea",placeholder:"请输入至少5个字符"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])}}},ae=$(ee,[["__scopeId","data-v-5aac5d8b"]]),te=["onClick"],le={class:"table-operator-btn"},pe={__name:"index",setup(k){const g=s(""),c=s(!1),o=s([]),_=s(""),d=s(),t=s(),p=s(""),r=s(null),u=s({total:4,currentPage:1,pageSize:10,pageSizes:[10,15,20,50]}),m=()=>{_.value="add",p.value="新增通信配置",r.value=null,d.value.open()},b=a=>{_.value="edit",p.value="编辑通信配置",r.value=a,d.value.open()},n=async()=>{const a=await t.value.validate();if(a){if(_.value==="add")o.value.push(a);else{const i=o.value.findIndex(w=>w.id===a.id);o.value.splice(i,1,a)}o.value=[...o.value],d.value.close()}},R=()=>{console.log(g.value)},q=a=>{const i=o.value.findIndex(w=>w.id===a.id);o.value.splice(i,1),o.value=[...o.value]},E=(a,i)=>{console.log(a,i)},S=[{prop:"gatewayId",label:"网关ID",render:a=>e("div",{className:"text-overflow",title:a.row.gatewayId},[e("b",null,[a.row.gatewayId])])},{prop:"gatewayName",label:"网关名称"},{prop:"gatewayVersion",label:"网关版本"},{prop:"interface",label:"通讯接口"},{prop:"remark",label:"备注",width:280,render:a=>e("div",{className:"text-overflow",title:a.row.remark},[e("span",null,[a.row.remark])])}];return h(async()=>{c.value=!0;const a=await new Promise(i=>{setTimeout(()=>{c.value=!1,i([{id:"1",gatewayId:"192.168.2.1",remark:"这是备注内容这是备注内容",interface:"RS232",gatewayName:"项目1网关",gatewayVersion:"1.0"},{id:"2",gatewayId:"192.168.2.1",remark:"这是备注内容",interface:"RS232",gatewayName:"项目1网关",gatewayVersion:"1.0"},{id:"3",gatewayId:"192.168.2.1",remark:"这是备注内容这是备注内容",interface:"RS232",gatewayName:"项目2网关",gatewayVersion:"2.0"},{id:"4",gatewayId:"192.168.2.1",remark:"这是备注内容",interface:"RS232",gatewayName:"项目2网关",gatewayVersion:"2.0"}])},1e3)});o.value=a}),(a,i)=>{const w=j,x=A,U=C,B=J,I=M("auth"),P=G;return f(),V(Z,null,{default:l(()=>[y((f(),V(H,{column:S,pageInfo:u.value,datasource:o.value,onPageChange:E},{toolbar:l(()=>[e(B,{align:"middle",gutter:5},{default:l(()=>[e(x,{span:2},{default:l(()=>[y((f(),V(w,{type:"primary",onClick:m},{default:l(()=>[D("新增")]),_:1})),[[I,"comm_add"]])]),_:1}),e(x,{offset:18,span:4},{default:l(()=>[e(U,{clearable:"",modelValue:g.value,"onUpdate:modelValue":i[0]||(i[0]=v=>g.value=v),placeholder:"网关名称","suffix-icon":F(L),onKeyup:K(R,["enter"])},null,8,["modelValue","suffix-icon"])]),_:1})]),_:1})]),operation:l(v=>[y((f(),N("a",{class:"table-operator-btn",onClick:T=>b(v.row)},[D("编辑")],8,te)),[[I,"comm_edit"]]),e(Y,{title:"你确定要删除该配置嘛?",icon:F(O),iconColor:"red",onConfirm:T=>q(v.row)},{default:l(()=>[y((f(),N("a",le,[D("删除")])),[[I,"comm_delete"]])]),_:2},1032,["icon","onConfirm"])]),_:1},8,["pageInfo","datasource"])),[[P,c.value]]),e(Q,{title:p.value,ref_key:"detailDrawerRef",ref:d,onConfirm:n},{default:l(()=>[e(ae,{ref_key:"commDetailRef",ref:t,initData:r.value},null,8,["initData"])]),_:1},8,["title"])]),_:1})}}};export{pe as default};
