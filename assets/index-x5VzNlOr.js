import{S as H,r as x,T as S,w as te,o as c,c as b,J as e,B as a,V as T,G as oe,a as I,a8 as C,Z as M,x as E,av as ae,a9 as L,a0 as A,a4 as le,a5 as ne,v as re,A as g,aw as X,a1 as Y,a2 as q,a6 as de,a7 as j,aq as se,aa as ce,ab as ie,ac as pe,ad as me,ax as ue}from"./index-fvEwmp9R.js";import{v as _e}from"./loading-d12Rk6KQ.js";import{_ as fe}from"./ProTable-uevuHVZS.js";import{E as O,a as P}from"./form-item-e1U13m8H.js";import{M as ye}from"./MainContentContainer-6mlL6plI.js";import{P as Z}from"./ProDrawer-hOq0kytu.js";import{_ as Ve}from"./ProPopConfirm-975zYDnt.js";import{E as ve}from"./date-picker-FV6jFD2d.js";import{C as z}from"./formConfig-7IyXZZgD.js";import{P as be}from"./ProUpload-VB_2DH3r.js";import"./checkbox-BwAjHRG5.js";import"./overlay-YwkunvKW.js";/* empty css                                                                  *//* empty css                 */import"./index-TQCUaLOA.js";import"./index-pwnaZ7hW.js";const De=p=>(le("data-v-651c753f"),p=p(),ne(),p),he={class:"container"},we=De(()=>I("div",{class:"title"},"技术参数",-1)),ge={class:"block-title"},xe={class:"left"},ke={__name:"param",props:{params:{type:Array,default:[]}},setup(p,{expose:D}){const m=p,y=x(),V=r=>{const f={};return r.forEach((v,w)=>{f[w]={name:v.name,content:v.content}}),f},t=S({formValue:V(m.params)}),o=r=>{delete t.formValue[r]},d=()=>{const r=Math.random();t.formValue[r]={name:"",content:""}};return te(()=>m.params,r=>{t.formValue=V(r)},{deep:!0}),D({getValue:()=>{const r=[];return Object.keys(t.formValue).forEach(f=>{r.push({name:t.formValue[f].name,content:t.formValue[f].content})}),r}}),(r,f)=>{const v=L,w=A,k=O,s=P;return c(),b("div",he,[we,e(s,{ref_key:"formRef",ref:y,modelValue:t.formValue,"onUpdate:modelValue":f[0]||(f[0]=_=>t.formValue=_)},{default:a(()=>[(c(!0),b(T,null,M(Object.keys(t.formValue),(_,B)=>(c(),b("div",{class:"block",key:_},[I("div",ge,[I("span",xe,"参数"+oe(B+1)+": ",1),e(v,{class:"del-btn",type:"danger",text:"",onClick:l=>o(_)},{default:a(()=>[C("删除")]),_:2},1032,["onClick"])]),e(k,{label:"参数名称",prop:_+".name"},{default:a(()=>[e(w,{modelValue:t.formValue[_].name,"onUpdate:modelValue":l=>t.formValue[_].name=l,placeholder:"请输入参数名称"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"]),e(k,{label:"参数内容",prop:_+".content"},{default:a(()=>[e(w,{modelValue:t.formValue[_].content,"onUpdate:modelValue":l=>t.formValue[_].content=l,placeholder:"请输入参数内容"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]))),128))]),_:1},8,["modelValue"]),e(v,{type:"primary",plain:"",class:"add-btn",icon:E(ae),onClick:d},{default:a(()=>[C("添加")]),_:1},8,["icon"])])}}},Fe=H(ke,[["__scopeId","data-v-651c753f"]]),Ce={__name:"detail",props:{initData:{type:Object}},setup(p,{expose:D}){const m={no:"",project:"",model:"",type:"",time:""},y=p;D({validate:()=>V.value.validate().then(()=>t.detailForm).catch(()=>!1)});const V=x(),t=S({detailForm:m,params:[],types:[{id:"空调",text:"空调"},{id:"配供电",text:"配供电"},{id:"照明",text:"照明"},{id:"动力",text:"动力"}]});return re(()=>{if(y.initData){const o={...m,...y.initData};t.detailForm=o}}),(o,d)=>{const h=A,r=O,f=Y,v=q,w=ve,k=P;return c(),b(T,null,[e(k,X({ref_key:"formRef",ref:V},E(z),{model:t.detailForm}),{default:a(()=>[e(r,{label:"设备名称",required:"",prop:"project"},{default:a(()=>[e(h,{placeholder:"请输入",modelValue:t.detailForm.project,"onUpdate:modelValue":d[0]||(d[0]=s=>t.detailForm.project=s)},null,8,["modelValue"])]),_:1}),e(r,{label:"资产编号",required:"",prop:"no"},{default:a(()=>[e(h,{placeholder:"请输入",modelValue:t.detailForm.no,"onUpdate:modelValue":d[1]||(d[1]=s=>t.detailForm.no=s)},null,8,["modelValue"])]),_:1}),e(r,{label:"型号规格",prop:"model"},{default:a(()=>[e(h,{placeholder:"请输入",modelValue:t.detailForm.model,"onUpdate:modelValue":d[2]||(d[2]=s=>t.detailForm.model=s)},null,8,["modelValue"])]),_:1}),e(r,{label:"设备类型",prop:"type"},{default:a(()=>[e(v,{modelValue:t.detailForm.type,"onUpdate:modelValue":d[3]||(d[3]=s=>t.detailForm.type=s)},{default:a(()=>[(c(!0),b(T,null,M(t.types,s=>(c(),g(f,{key:s.id,label:s.text,value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"安装时间",prop:"time"},{default:a(()=>[e(w,{modelValue:t.detailForm.time,"onUpdate:modelValue":d[4]||(d[4]=s=>t.detailForm.time=s),type:"datetime",placeholder:"请选择日期时间","value-format":"YYYY-MM-DD hh:mm:ss"},null,8,["modelValue"])]),_:1})]),_:1},16,["model"]),e(Fe,{params:t.params},null,8,["params"])],64)}}},Re=I("div",{class:"el-upload__tip tip"}," 支持扩展名：.rar .zip .doc .docx... ",-1),je={__name:"import",setup(p,{expose:D}){const m=x(),y=S({form:{}});return D({validate:async()=>{let t=!1;return await m.value.validate((o,d)=>{}),t&&y.form}}),(t,o)=>{const d=O,h=P;return c(),g(h,X({ref_key:"formRef",ref:m},E(z),{model:y.form}),{default:a(()=>[e(d,{label:"导入文件"},{default:a(()=>[e(be,null,{tip:a(()=>[Re]),_:1})]),_:1})]),_:1},16,["model"])}}},Se=["onClick"],Te={class:"table-operator-btn"};function Ee(p){return typeof p=="function"||Object.prototype.toString.call(p)==="[object Object]"&&!ue(p)}const Ue={__name:"index",setup(p){const D=[{checkBox:"",project:"项目",model:"XH456111361114587542",no:"ZC156464547589652321",type:"空调",desc:"技术参数技术参数技术参数技术参数技术参数技术参数技术参数技术参数技术参",time:"2023-05-12  15:21"},{checkBox:"",project:"项目",model:"XH456111361114587542",no:"ZC156464547589652321",type:"供配电",desc:"技术参数技术参数技术参数技术参数技术参数技术参数技术参数技术参数技术参",time:"2023-05-12  15:21"},{checkBox:"",project:"项目",model:"XH456111361114587542",no:"ZC156464547589652321",type:"照明",desc:"技术参数技术参数技术参数技术参数技术参数技术参数技术参数技术参数技术参",time:"2023-05-12  15:21"},{checkBox:"",project:"项目",model:"XH456111361114587542",no:"ZC156464547589652321",type:"动力",desc:"技术参数技术参数技术参数技术参数技术参数技术参数技术参数技术参数技术参",time:"2023-05-12  15:21"}],m=x(),y=x(),V=x(),t=x(),o=S({searchFormData:{type:"all",deviceType:"all",number:""},initDetailData:{},dataSource:[],loading:!0,names:[{id:"all",text:"全部项目名称"}],types:[{id:"all",text:"全部设备类型"}],detailDrawerTitle:"",operateType:""}),d=[{prop:"project",label:"设备型号名称",width:110,render:l=>e("div",{className:"text-overflow",title:l.row.project},[e("b",null,[l.row.project])])},{prop:"model",label:"型号规格",width:150},{prop:"no",label:"资产编号",width:150},{prop:"type",label:"设备类型",width:100,render:l=>{const n=l.row.type;let u="";return n==="空调"?u="":n==="供配电"?u="success":n==="照明"?u="warning":n==="动力"?u="danger":u="info",e(se,{type:u},Ee(n)?n:{default:()=>[n]})}},{prop:"desc",label:"技术参数",width:210},{prop:"time",label:"安装时间"}],h=(l,n)=>{console.log(l,n)},r=S({total:100,currentPage:1,pageSize:10,pageSizes:[10,15,20,50]});(async()=>{const l=await new Promise(n=>{setTimeout(()=>{o.loading=!1;const u=new Array(10).fill("").map(($,F)=>{const R=F%4;return{...D[R],project:D[R].project+"00"+F,id:F}});n(u)},600)});o.dataSource=l})();const v=()=>{o.operateType="add",o.detailDrawerTitle="新增设备台帐",o.initDetailData=null,m.value.open()},w=()=>{V.value.open()},k=l=>{o.operateType="edit",o.detailDrawerTitle="编辑设备台帐",o.initDetailData=l,m.value.open()},s=l=>{},_=async()=>{const l=await y.value.validate();if(l){if(o.operateType==="add")o.dataSource.push(l);else{const n=o.dataSource.findIπndex(u=>u.id===l.id);o.dataSource.splice(n,1,l)}o.dataSource=[...o.dataSource],m.value.close()}},B=async()=>{V.value.close()};return(l,n)=>{const u=L,$=ce,F=Y,R=q,N=O,G=A,J=P,K=ie,Q=fe,U=de("auth"),W=_e;return c(),g(ye,null,{default:a(()=>[j((c(),g(Q,{column:d,pageInfo:r,datasource:o.dataSource,onPageChange:h},{toolbar:a(()=>[e(K,{align:"middle",gutter:5},{default:a(()=>[e($,{span:6},{default:a(()=>[j((c(),g(u,{type:"primary",onClick:v},{default:a(()=>[C("新增")]),_:1})),[[U,"ledger_add"]]),j((c(),g(u,{onClick:w},{default:a(()=>[C("批量导入")]),_:1})),[[U,"ledger_batch_import"]])]),_:1}),e($,{span:18},{default:a(()=>[e(J,{class:"search-form",inline:!0,model:o.searchFormData},{default:a(()=>[e(N,null,{default:a(()=>[e(R,{modelValue:o.searchFormData.type,"onUpdate:modelValue":n[0]||(n[0]=i=>o.searchFormData.type=i)},{default:a(()=>[(c(!0),b(T,null,M(o.names,i=>(c(),g(F,{key:i.id,label:i.text,value:i.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(N,null,{default:a(()=>[e(R,{modelValue:o.searchFormData.deviceType,"onUpdate:modelValue":n[1]||(n[1]=i=>o.searchFormData.deviceType=i)},{default:a(()=>[(c(!0),b(T,null,M(o.types,i=>(c(),g(F,{key:i.id,label:i.text,value:i.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(N,null,{default:a(()=>[e(G,{modelValue:o.searchFormData.number,"onUpdate:modelValue":n[2]||(n[2]=i=>o.searchFormData.number=i),placeholder:"设备名称/资产编号","suffix-icon":E(pe)},null,8,["modelValue","suffix-icon"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),operation:a(i=>[j((c(),b("a",{class:"table-operator-btn",onClick:ee=>k(i.row)},[C("编辑")],8,Se)),[[U,"ledger_edit"]]),e(Ve,{title:"你确定要删除该配置吗?",icon:E(me),iconColor:"red",onConfirm:ee=>s(i.row)},{default:a(()=>[j((c(),b("a",Te,[C("删除")])),[[U,"ledger_delete"]])]),_:2},1032,["icon","onConfirm"])]),_:1},8,["pageInfo","datasource"])),[[W,o.loading]]),e(Z,{title:o.detailDrawerTitle,ref_key:"detailDrawerRef",ref:m,onConfirm:_},{default:a(()=>[e(Ce,{ref_key:"commDetailRef",ref:y,initData:o.initDetailData},null,8,["initData"])]),_:1},8,["title"]),e(Z,{title:"批量导入",ref_key:"importDrawerRef",ref:V,onConfirm:B},{default:a(()=>[e(je,{ref_key:"importRef",ref:t},null,512)]),_:1},512)]),_:1})}}},Je=H(Ue,[["__scopeId","data-v-343a387d"]]);export{Je as default};
