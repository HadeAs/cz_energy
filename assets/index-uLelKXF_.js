import{r as P,T as A,w as Q,o as r,A as c,B as t,x as M,aw as W,V,Z as k,c as y,J as e,a8 as f,a1 as Z,a2 as z,a0 as N,S as q,ac as Y,G as _e,a6 as J,a7 as D,a9 as I,aa as X,ab as ee,ad as te,aq as fe,ax as be,ay as ye}from"./index-fvEwmp9R.js";import{M as ge}from"./MainTabContainer-TtDB-ieT.js";import{v as oe}from"./loading-d12Rk6KQ.js";import{M as ae}from"./MainContentContainer-6mlL6plI.js";import{_ as le}from"./ProTable-uevuHVZS.js";import{_ as ne}from"./ProPopConfirm-975zYDnt.js";import{E as $,a as L}from"./form-item-e1U13m8H.js";import{E as xe,a as we}from"./radio-button-Vxytwsvj.js";import{E as ve}from"./date-picker-FV6jFD2d.js";import{P as re}from"./ProDrawer-hOq0kytu.js";import{C as se}from"./formConfig-7IyXZZgD.js";import{P as he}from"./ProUpload-VB_2DH3r.js";import{E as Ce,a as Ve}from"./checkbox-BwAjHRG5.js";/* empty css                */import"./overlay-YwkunvKW.js";import{E as ue}from"./index-_DrZmpO5.js";import{E as ie}from"./index-TQCUaLOA.js";import{E as De}from"./index-51LQ_GJC.js";import"./tab-pane-jamRkTn6.js";/* empty css                                                                  *//* empty css                 */import"./index-pwnaZ7hW.js";const ke={__name:"detail",props:{title:{type:String},data:{type:Object,default:{}}},emits:["submit"],setup(w,{expose:v,emit:m}){const h={project:"",name:"",type:"",position:"",system:"",admin:"",classify:"",time:"",status:"1",img:[]},n=m,E=w,x=P(),O=P(),a=A({form:{...h,...E.data},projectOpts:[{id:"1",text:"demo1"},{id:"2",text:"demo2"},{id:"3",text:"demo3"}]}),B=async()=>{await O.value.validate(s=>{s&&(x.value.close(),n("submit",a.form))})};return Q(()=>E.data,s=>{a.form={...h,...s}}),v({open:()=>{x.value.open()}}),(s,l)=>{const g=Z,b=z,_=$,R=N,i=ve,u=xe,j=we,S=L;return r(),c(re,{title:w.title,ref_key:"handleDrawerRef",ref:x,onConfirm:B},{default:t(()=>[e(S,W({ref_key:"formRef",ref:O},M(se),{model:a.form}),{default:t(()=>[e(_,{label:"所属项目",required:"",prop:"project"},{default:t(()=>[e(b,{modelValue:a.form.project,"onUpdate:modelValue":l[0]||(l[0]=o=>a.form.project=o)},{default:t(()=>[(r(!0),y(V,null,k(a.projectOpts,o=>(r(),c(g,{key:o.id,label:o.text,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"设备名称",required:"",prop:"name"},{default:t(()=>[e(R,{placeholder:"请输入设备名称",modelValue:a.form.name,"onUpdate:modelValue":l[1]||(l[1]=o=>a.form.name=o)},null,8,["modelValue"])]),_:1}),e(_,{label:"设备种类",required:"",prop:"type"},{default:t(()=>[e(b,{modelValue:a.form.type,"onUpdate:modelValue":l[2]||(l[2]=o=>a.form.type=o)},{default:t(()=>[(r(!0),y(V,null,k(a.projectOpts,o=>(r(),c(g,{key:o.id,label:o.text,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"设备位置",required:"",prop:"position"},{default:t(()=>[e(R,{modelValue:a.form.position,"onUpdate:modelValue":l[3]||(l[3]=o=>a.form.position=o),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),e(_,{label:"系统分类",required:"",prop:"system"},{default:t(()=>[e(b,{modelValue:a.form.system,"onUpdate:modelValue":l[4]||(l[4]=o=>a.form.system=o)},{default:t(()=>[(r(!0),y(V,null,k(a.projectOpts,o=>(r(),c(g,{key:o.id,label:o.text,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"管理人",required:"",prop:"admin"},{default:t(()=>[e(b,{modelValue:a.form.admin,"onUpdate:modelValue":l[5]||(l[5]=o=>a.form.admin=o)},{default:t(()=>[(r(!0),y(V,null,k(a.projectOpts,o=>(r(),c(g,{key:o.id,label:o.text,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"保养信息类别",required:"",prop:"classify"},{default:t(()=>[e(b,{modelValue:a.form.classify,"onUpdate:modelValue":l[6]||(l[6]=o=>a.form.classify=o)},{default:t(()=>[(r(!0),y(V,null,k(a.projectOpts,o=>(r(),c(g,{key:o.id,label:o.text,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"启用时间",required:"",prop:"time"},{default:t(()=>[e(i,{"value-format":"YYYY-MM-DD hh:mm:ss",modelValue:a.form.time,"onUpdate:modelValue":l[7]||(l[7]=o=>a.form.time=o),type:"datetime",placeholder:"请选择时间"},null,8,["modelValue"])]),_:1}),e(_,{label:"启用状态",required:"",prop:"status"},{default:t(()=>[e(j,{modelValue:a.form.status,"onUpdate:modelValue":l[8]||(l[8]=o=>a.form.status=o)},{default:t(()=>[e(u,{label:"1"},{default:t(()=>[f("启用")]),_:1}),e(u,{label:"2"},{default:t(()=>[f("停用")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"上传设备图片",required:"",prop:"img"},{default:t(()=>[e(he,{"list-type":"picture-card",limit:5,"file-list":a.form.img},null,8,["file-list"])]),_:1})]),_:1},16,["model"])]),_:1},8,["title"])}}},Ee={__name:"relate",props:{data:{type:Object,default:{}}},emits:["submit"],setup(w,{expose:v,emit:m}){const h={param:"",devices:[]},n=m,E=w,x=P(),O=P(),a=A({form:{...h,...E.data},deviceOpts:new Array(10).fill("").map((s,l)=>({text:"冷热源侧供水温度",id:l}))}),B=()=>{n("submit",a.form)};return Q(()=>E.data,s=>{a.form=s}),v({open:()=>{x.value.open()}}),(s,l)=>{const g=N,b=$,_=Ce,R=Ve,i=L;return r(),c(re,{title:"关联设备参数",ref_key:"handleDrawerRef",ref:x,onConfirm:B},{default:t(()=>[e(i,W({ref_key:"formRef",ref:O,class:"device-container"},M(se),{model:a.form}),{default:t(()=>[e(b,{prop:"param"},{default:t(()=>[e(g,{modelValue:a.form.param,"onUpdate:modelValue":l[0]||(l[0]=u=>a.form.param=u),placeholder:"请输入设备参数名称","prefix-icon":M(Y)},null,8,["modelValue","prefix-icon"])]),_:1}),e(b,{prop:"devices"},{default:t(()=>[e(R,{modelValue:a.form.devices,"onUpdate:modelValue":l[1]||(l[1]=u=>a.form.devices=u)},{default:t(()=>[(r(!0),y(V,null,k(a.deviceOpts,u=>(r(),c(_,{key:u.id,label:u.id},{default:t(()=>[f(_e(u.text),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},16,["model"])]),_:1},512)}}},Oe=q(Ee,[["__scopeId","data-v-d2af47ca"]]),Re={style:{height:"100%"}},je=["onClick"],Fe={class:"table-operator-btn"},Be=["onClick"],Se={__name:"index",setup(w){const v=[{checkBox:"",id:"",name:"设备001",no:"ZC785646325",project:"项目001",type:"冷水机组",classify:"空调系统",dept:"设备科",admin:"admin",status:1,time:"2023-05-12",position:"空调主机—一楼主机机房"},{checkBox:"",id:"",name:"设备001",no:"ZC785646325",project:"项目001",type:"冷水机组",classify:"空调系统",dept:"设备科",admin:"admin",status:0,time:"2023-05-12",position:"空调主机—一楼主机机房"},{checkBox:"",id:"",name:"设备001",no:"ZC785646325",project:"项目001",type:"冷水机组",classify:"空调系统",dept:"设备科",admin:"admin",status:1,time:"2023-05-12",position:"空调主机—一楼主机机房"},{checkBox:"",id:"",name:"设备001",no:"ZC785646325",project:"项目001",type:"冷水机组",classify:"空调系统",dept:"设备科",admin:"admin",status:0,time:"2023-05-12",position:"空调主机—一楼主机机房"}],m=P(),h=P(),n=A({searchFormData:{status:"all",type:"all",nameType:"all",name:""},statusOpts:[{id:"all",text:"启用状态"},{id:"1",text:"启用"},{id:"2",text:"停用"}],typeOpts:[{id:"all",text:"系统分类"},{id:"1",text:"空调系统"},{id:"2",text:"动力系统"}],nameOpts:[{id:"all",text:"全部项目名称"},{id:"1",text:"项目名称1"},{id:"2",text:"项目名称2"}],dataSource:[],loading:!0,selectRows:[],currentData:{},paramData:{},title:""}),E=A({total:100,currentPage:1,pageSize:10,pageSizes:[10,15,20,50]}),x=[{prop:"name",label:"设备名称",width:110,fixed:!0,render:i=>e("div",{className:"text-overflow",title:i.row.name},[e("b",null,[i.row.name])])},{prop:"no",label:"资产编号",width:120},{prop:"project",label:"项目名称",width:180},{prop:"type",label:"设备类型",width:100},{prop:"classify",label:"所属系统分类",width:120},{prop:"dept",label:"管理科室"},{prop:"admin",label:"管理人"},{prop:"position",label:"设备位置",width:180},{prop:"time",label:"启用时间",width:150},{prop:"status",label:"设备状态",render:i=>{const u=i.row.status;return e("div",{className:"badge"},[e("span",{className:u===1?"success":"danger"},[f("●")]),u===1?"启用":"停用"])}}];(async()=>{const i=await new Promise(u=>{setTimeout(()=>{n.loading=!1;const j=new Array(10).fill("").map((S,o)=>{const F=o%4;return{...v[F],project:v[F].project+"00"+o,id:o}});u(j)},600)});n.dataSource=i})();const a=()=>{ue.confirm("确认删除选中的内容？","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{ie({type:"success",message:"删除成功"})}).catch(()=>{})},B=(i,u)=>{console.log(i,u)},p=i=>{n.selectRows=i},s=()=>{n.title="新增",n.currentData={},m.value.open()},l=i=>{n.currentData=i,n.title="编辑",m.value.open()},g=i=>{n.paramData=i,h.value.open()},b=i=>{},_=i=>{},R=i=>{};return(i,u)=>{const j=I,S=X,o=Z,F=z,T=$,G=N,C=L,H=ee,de=ne,me=le,pe=ae,U=J("auth"),ce=oe;return r(),y("div",Re,[e(pe,null,{default:t(()=>[D((r(),c(me,{multiple:"",column:x,pageInfo:E,datasource:n.dataSource,onPageChange:B,onSelectionChange:p},{toolbar:t(()=>[e(H,{align:"middle",gutter:5},{default:t(()=>[e(S,{span:6},{default:t(()=>[D((r(),c(j,{type:"primary",onClick:s},{default:t(()=>[f("新增")]),_:1})),[[U,"group_index_add"]]),D((r(),c(j,{disabled:!n.selectRows.length,onClick:a},{default:t(()=>[f("批量删除")]),_:1},8,["disabled"])),[[U,"group_index_batch_delete"]])]),_:1}),e(S,{span:18},{default:t(()=>[e(C,{class:"search-form",inline:!0,model:n.searchFormData},{default:t(()=>[e(T,null,{default:t(()=>[e(F,{modelValue:n.searchFormData.status,"onUpdate:modelValue":u[0]||(u[0]=d=>n.searchFormData.status=d)},{default:t(()=>[(r(!0),y(V,null,k(n.statusOpts,d=>(r(),c(o,{key:d.id,label:d.text,value:d.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(T,null,{default:t(()=>[e(F,{modelValue:n.searchFormData.type,"onUpdate:modelValue":u[1]||(u[1]=d=>n.searchFormData.type=d)},{default:t(()=>[(r(!0),y(V,null,k(n.typeOpts,d=>(r(),c(o,{key:d.id,label:d.text,value:d.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(T,null,{default:t(()=>[e(F,{modelValue:n.searchFormData.nameType,"onUpdate:modelValue":u[2]||(u[2]=d=>n.searchFormData.nameType=d)},{default:t(()=>[(r(!0),y(V,null,k(n.nameOpts,d=>(r(),c(o,{key:d.id,label:d.text,value:d.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(T,null,{default:t(()=>[e(G,{modelValue:n.searchFormData.name,"onUpdate:modelValue":u[3]||(u[3]=d=>n.searchFormData.name=d),placeholder:"项目名称","suffix-icon":M(Y)},null,8,["modelValue","suffix-icon"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),operation:t(d=>[D((r(),y("a",{class:"table-operator-btn",onClick:K=>l(d.row)},[f("编辑")],8,je)),[[U,"group_index_edit"]]),e(de,{title:"你确定要删除该项目嘛?",icon:M(te),iconColor:"red",onConfirm:K=>b(d.row)},{default:t(()=>[D((r(),y("a",Fe,[f("删除")])),[[U,"group_index_delete"]])]),_:2},1032,["icon","onConfirm"]),D((r(),y("a",{class:"table-operator-btn",onClick:K=>g(d.row)},[f("关联设备参数")],8,Be)),[[U,"group_index_connect"]])]),_:1},8,["pageInfo","datasource"])),[[ce,n.loading]])]),_:1}),e(ke,{ref_key:"detailRef",ref:m,title:n.title,data:n.currentData,onSubmit:_},null,8,["title","data"]),e(Oe,{ref_key:"relateRef",ref:h,data:n.paramData,onSubmit:R},null,8,["data"])])}}},Te=q(Se,[["__scopeId","data-v-7a928257"]]),Pe={class:"table-operator-btn"};function Me(w){return typeof w=="function"||Object.prototype.toString.call(w)==="[object Object]"&&!be(w)}const Ae={__name:"index",setup(w){const v=[{checkBox:"",id:"",name:"设备001",project:"项目001",type:"空调（主机机房、末端侧）",status:1,time:"2023-05-12  15:21",num:5},{checkBox:"",id:"",name:"设备001",project:"项目001",type:"供配电（高低压系统、配电系统）",status:0,time:"2023-05-12  15:21",num:5},{checkBox:"",id:"",name:"设备001",project:"项目001",type:"照明",status:1,time:"2023-05-12  15:21",num:5},{checkBox:"",id:"",name:"设备001",project:"项目001",type:"动力电梯设备、生活水泵）",status:0,time:"2023-05-12  15:21",num:5}];P();const m=A({searchFormData:{nameType:"all",name:""},nameOpts:[{id:"all",text:"全部项目名称"},{id:"1",text:"项目名称1"},{id:"2",text:"项目名称2"}],dataSource:[],loading:!0,selectRows:[],currentData:{},title:""}),h=A({total:100,currentPage:1,pageSize:10,pageSizes:[10,15,20,50]}),n=[{prop:"name",label:"设备名称",width:110,fixed:!0,render:p=>e("div",{className:"text-overflow",title:p.row.name},[e("b",null,[p.row.name])])},{prop:"project",label:"所属项目",width:130},{prop:"type",label:"所属系统",width:180,render:p=>{const s=p.row.type;let l;return s&&(s.indexOf("空调")>-1?l="":s.indexOf("供配电")>-1?l="success":s.indexOf("照明")>-1?l="warning":s.indexOf("动力")>-1?l="danger":l="info"),e(fe,{type:l},Me(s)?s:{default:()=>[s]})}},{prop:"time",label:"启用时间",width:150},{prop:"status",label:"设备状态",render:p=>{const s=p.row.status;return e("div",{className:"badge"},[e("span",{className:s===1?"success":"danger"},[f("●")]),s===1?"启用":"停用"])}},{prop:"num",label:"关联设备参数",width:120,render:p=>e(De,{placement:"right",title:"关联设备参数:",width:200,trigger:"click"},{default:()=>e(V,null,[e("div",null,[f("冷热源侧回水温度")]),e("div",null,[f("用户侧供水温度")]),e("div",null,[f("用户侧回水温度")]),e("div",null,[f("汇丰大厦二次供水温度")])]),reference:()=>e(I,{text:!0,type:"primary"},{default:()=>[p.row.num]})})},{prop:"time",label:"参数信息",width:150}];(async()=>{const p=await new Promise(s=>{setTimeout(()=>{m.loading=!1;const l=new Array(10).fill("").map((g,b)=>{const _=b%4;return{...v[_],project:v[_].project+"00"+b,id:b}});s(l)},600)});m.dataSource=p})();const x=()=>{ue.confirm("确认导出选中的内容？","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{ie({type:"success",message:"导出成功"})}).catch(()=>{})},O=(p,s)=>{console.log(p,s)},a=p=>{m.selectRows=p},B=p=>{};return(p,s)=>{const l=I,g=X,b=Z,_=z,R=$,i=N,u=L,j=ee,S=ne,o=le,F=ae,T=J("auth"),G=oe;return r(),c(F,null,{default:t(()=>[D((r(),c(o,{multiple:"",column:n,pageInfo:h,datasource:m.dataSource,onPageChange:O,onSelectionChange:a},{toolbar:t(()=>[e(j,{align:"middle",gutter:5},{default:t(()=>[e(g,{span:6},{default:t(()=>[D((r(),c(l,{disabled:!m.selectRows.length,onClick:x},{default:t(()=>[f("批量导出")]),_:1},8,["disabled"])),[[T,"group_work_batch_export"]])]),_:1}),e(g,{span:18},{default:t(()=>[e(u,{class:"search-form",inline:!0,model:m.searchFormData},{default:t(()=>[e(R,null,{default:t(()=>[e(_,{modelValue:m.searchFormData.nameType,"onUpdate:modelValue":s[0]||(s[0]=C=>m.searchFormData.nameType=C)},{default:t(()=>[(r(!0),y(V,null,k(m.nameOpts,C=>(r(),c(b,{key:C.id,label:C.text,value:C.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(R,null,{default:t(()=>[e(i,{modelValue:m.searchFormData.name,"onUpdate:modelValue":s[1]||(s[1]=C=>m.searchFormData.name=C),placeholder:"设备名称/资产编号","suffix-icon":M(Y)},null,8,["modelValue","suffix-icon"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),operation:t(C=>[e(S,{title:"你确定要删除该项目嘛?",icon:M(te),iconColor:"red",onConfirm:H=>B(C.row)},{default:t(()=>[D((r(),y("a",Pe,[f("删除")])),[[T,"group_work_delete"]])]),_:2},1032,["icon","onConfirm"])]),_:1},8,["pageInfo","datasource"])),[[G,m.loading]])]),_:1})}}},Ue=q(Ae,[["__scopeId","data-v-d52eb217"]]),Ie="group",Ne={__name:"index",setup(w){const v=ye(),m=[{label:"设备组管理",name:"group",component:Te},{label:"设备运行",name:"run",component:Ue}],h=()=>{const n=v.resolve({name:"recycleBin"}).href;window.open(n,"_blank")};return(n,E)=>{const x=I,O=J("auth");return r(),c(ge,{tabData:m,defaultTab:Ie},{extra:t(()=>[D((r(),c(x,{class:"recycle-btn",onClick:h},{default:t(()=>[f("回收站")]),_:1})),[[O,"group_recycle"]])]),_:1})}}},it=q(Ne,[["__scopeId","data-v-f21a1826"]]);export{it as default};
