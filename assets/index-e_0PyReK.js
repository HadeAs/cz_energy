import{j as k,T as _,r as w,o as N,c as S,a as l,J as e,B as s,x as c,a8 as h,G as C,E as B,a0 as U,a9 as q,a4 as z,a5 as R,bb as P,bc as M,bd as j,be as D,bf as G,S as J}from"./index-fvEwmp9R.js";import{E as L,a as $}from"./tab-pane-jamRkTn6.js";import{E as A,a as H}from"./form-item-e1U13m8H.js";const v=d=>(z("data-v-edadf26d"),d=d(),R(),d),K={class:"page-container"},O=v(()=>l("div",{class:"cs-login-header"},[l("img",{src:P}),l("span",{class:"cs-header-text"},"建筑能耗与碳排放检测平台"),l("span",{class:"cs-header-sub"},"V1.0")],-1)),Q={class:"cs-login-content"},W={class:"cs-login-wrapper"},X=v(()=>l("p",{class:"cs-login-title"},"欢迎登录",-1)),Y=k({__name:"index",setup(d){const x=/^1[3456789]\d{9}$/,V=_({name:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),F=_({phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:x,message:"手机号码格式不正确",trigger:"blur"}],captcha:[{required:!0,message:"请输入短信验证码",trigger:"blur"}]}),i=w(),n=w(),a=_({activeName:"pwd",pwdForm:{name:"",password:""},msgForm:{phone:"",captcha:""},msgText:"获取验证码",phoneValid:!1}),T=()=>{a.activeName==="pwd"?n.value.resetFields():i.value.resetFields()},y=async()=>{await n.value.validateField("phone",u=>{if(u){let o=60;a.msgText=o+"S";const r=setInterval(()=>{o===0?(clearInterval(r),a.msgText="获取验证码"):(o--,a.msgText=o+"S")},1e3)}})},E=async()=>{await(a.activeName==="pwd"?i.value:n.value).validate(o=>{o&&console.log("submit!")})};return(u,o)=>{const r=B,m=U,p=A,f=H,g=L,b=q,I=$;return N(),S("div",K,[O,l("div",Q,[l("div",W,[X,e(I,{modelValue:a.activeName,"onUpdate:modelValue":o[4]||(o[4]=t=>a.activeName=t),class:"login-tabs",onTabClick:T},{default:s(()=>[e(g,{label:"密码登录",name:"pwd"},{default:s(()=>[e(f,{ref_key:"formPwd",ref:i,size:"large",rules:V,model:a.pwdForm},{default:s(()=>[e(p,{prop:"name"},{default:s(()=>[e(m,{modelValue:a.pwdForm.name,"onUpdate:modelValue":o[0]||(o[0]=t=>a.pwdForm.name=t),placeholder:"用户名"},{prefix:s(()=>[e(r,null,{default:s(()=>[e(c(M))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(p,{prop:"password"},{default:s(()=>[e(m,{type:"password",autocomplete:"off",modelValue:a.pwdForm.password,"onUpdate:modelValue":o[1]||(o[1]=t=>a.pwdForm.password=t),placeholder:"密码"},{prefix:s(()=>[e(r,null,{default:s(()=>[e(c(j))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1}),e(g,{label:"短信登录",name:"msg"},{default:s(()=>[e(f,{ref_key:"formMsg",ref:n,size:"large",rules:F,model:a.msgForm},{default:s(()=>[e(p,{prop:"phone"},{default:s(()=>[e(m,{modelValue:a.msgForm.phone,"onUpdate:modelValue":o[2]||(o[2]=t=>a.msgForm.phone=t),placeholder:"手机号码"},{prefix:s(()=>[e(r,null,{default:s(()=>[e(c(D))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(p,{prop:"captcha"},{default:s(()=>[e(m,{modelValue:a.msgForm.captcha,"onUpdate:modelValue":o[3]||(o[3]=t=>a.msgForm.captcha=t),placeholder:"验证码",class:"captcha-input"},{prefix:s(()=>[e(r,null,{default:s(()=>[e(c(G))]),_:1})]),append:s(()=>[e(b,{size:"large",type:a.msgText==="获取验证码"?"primary":"default",disabled:a.msgText!=="获取验证码",onClick:y},{default:s(()=>[h(C(a.msgText),1)]),_:1},8,["type","disabled"])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1})]),_:1},8,["modelValue"]),e(b,{type:"primary",size:"large",onClick:E},{default:s(()=>[h(" 登陆 ")]),_:1})])])])}}}),se=J(Y,[["__scopeId","data-v-edadf26d"]]);export{se as default};
